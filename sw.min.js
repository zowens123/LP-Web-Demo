import leanplum from `leanplum-sdk`

self.addEventListener("activate", async() => {
	console.log("server worker activated")
});

let isSubscribedToWebPush = false;
let isWebPushSupported = leanplum.isWebPushSupported();
if(isWebPushSupported){
  leanplum.isWebPushSubscribed().then(subscriptionStatus => {
      isSubscribedToWebPush = subscriptionStatus;
  });
}

if(isWebPushSupported && !isSubscribedToWebPush){
  // Register by passing SW filepath (which is in our root directory).
  leanplum.registerForWebPush('/sw.min.js', subscriptionStatus => {
    console.log('Subscription status: %s', subscriptionStatus);
  });
}
